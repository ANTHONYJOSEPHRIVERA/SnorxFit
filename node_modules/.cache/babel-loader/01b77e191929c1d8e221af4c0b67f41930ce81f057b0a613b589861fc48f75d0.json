{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\FICTIA\\\\src\\\\App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport AuthScreen from './components/AuthScreen';\nimport LoadingScreen from './components/LoadingScreen';\nimport UserProfileForm from './components/UserProfileForm';\nimport Dashboard from './components/Dashboard';\nimport HomeOverview from './components/HomeOverview';\nimport WorkoutPlan from './components/WorkoutPlan';\nimport NutritionPlan from './components/NutritionPlan';\nimport ProgressTracker from './components/ProgressTracker';\nimport FoodSelection from './components/FoodSelection';\nimport Chatbot from './components/Chatbot';\nimport WeightTracker from './components/WeightTracker';\nimport MoodDiary from './components/MoodDiary';\nimport Report from './components/Report';\nimport RemindersManager from './components/RemindersManager';\nimport PhotoGallery from './components/PhotoGallery';\nimport FoodScanner from './components/FoodScanner';\nimport testApiConnection from './utils/testApi';\nimport AppLayout from './layout/AppLayout';\nimport { ToastProvider } from './contexts/ToastContext';\nimport { flushQueue } from './utils/offlineQueue';\n// import { weightApi, moodApi, reminderApi } from './services/apiService'; // REMOVIDO - Migrado a Firebase\nimport { calculateBMR, calculateDailyCalories } from './utils/calculations';\n\n// Hacer la funci√≥n disponible globalmente para debug\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nif (typeof window !== 'undefined') {\n  window.testApiConnection = testApiConnection;\n}\n\n// Componente principal de la aplicaci√≥n autenticada\nconst AuthenticatedApp = () => {\n  _s();\n  const {\n    user,\n    logout,\n    isOnline\n  } = useAuth();\n  // Sincronizar cola offline cuando volvemos online\n  // TODO: Migrar a Firebase\n  useEffect(() => {\n    if (!isOnline || !user) return;\n    // (async () => {\n    //   await flushQueue({\n    //     'weight:add': async ({ weight, date }) => {\n    //       const r = await weightApi.add(weight); return r.success;\n    //     },\n    //     'mood:add': async ({ mood, note }) => {\n    //       const r = await moodApi.add(mood, note); return r.success;\n    //     },\n    //     'reminder:add': async ({ type, scheduledAt, message }) => {\n    //       const r = await reminderApi.add(type, scheduledAt, message); return r.success;\n    //     }\n    //   });\n    // })();\n  }, [isOnline, user]);\n  const [userProfile, setUserProfile] = useState(null);\n  const [currentView, setCurrentView] = useState('profile');\n  const [recentWeights, setRecentWeights] = useState([]);\n  const [isDarkMode, setIsDarkMode] = useState(() => {\n    // Cargar preferencia de tema desde localStorage\n    const savedTheme = localStorage.getItem('snorxfit_theme');\n    return savedTheme === 'dark';\n  });\n  const [showChatbot, setShowChatbot] = useState(false);\n  const [selectedFoods, setSelectedFoods] = useState({});\n  const [isLoadingProfile, setIsLoadingProfile] = useState(true);\n  useEffect(() => {\n    // Aplicar dark class al elemento html y guardar preferencia\n    if (isDarkMode) {\n      document.documentElement.classList.add('dark');\n      localStorage.setItem('snorxfit_theme', 'dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n      localStorage.setItem('snorxfit_theme', 'light');\n    }\n  }, [isDarkMode]);\n\n  // Cargar perfil del usuario desde la API\n  useEffect(() => {\n    const loadUserProfile = async () => {\n      try {\n        setIsLoadingProfile(true);\n        if (!isOnline) {\n          // Fallback a localStorage si la API no est√° disponible\n          const savedProfile = localStorage.getItem(`snorxfit_profile_${user.id}`);\n          if (savedProfile) {\n            const profile = JSON.parse(savedProfile);\n            setUserProfile(profile);\n            setCurrentView('dashboard');\n          }\n          setIsLoadingProfile(false);\n          return;\n        }\n\n        // Intentar cargar perfil desde la API\n        console.log('üìä Cargando perfil desde Firebase...');\n        // const { profileApi } = await import('./services/apiService');\n        // const result = await profileApi.getProfile();\n\n        // TODO: Cargar desde Firebase Firestore\n        const result = {\n          success: false\n        };\n        if (result.success) {\n          setUserProfile(result.data.profile);\n          setCurrentView('home');\n          console.log('‚úÖ Perfil cargado desde la API');\n        } else {\n          // Si no hay perfil en la API, intentar cargar desde localStorage\n          const savedProfile = localStorage.getItem(`snorxfit_profile_${user.id}`);\n          if (savedProfile) {\n            const profile = JSON.parse(savedProfile);\n            setUserProfile(profile);\n            setCurrentView('home');\n            console.log('üì± Perfil cargado desde localStorage (fallback)');\n          } else {\n            console.log('üìù No hay perfil, mostrando formulario de creaci√≥n');\n            setCurrentView('profile');\n          }\n        }\n      } catch (error) {\n        console.error('Error cargando perfil:', error);\n        // Fallback a localStorage en caso de error\n        const savedProfile = localStorage.getItem(`snorxfit_profile_${user.id}`);\n        if (savedProfile) {\n          const profile = JSON.parse(savedProfile);\n          setUserProfile(profile);\n          setCurrentView('home');\n        }\n      } finally {\n        setIsLoadingProfile(false);\n      }\n    };\n    if (user) {\n      loadUserProfile();\n    }\n  }, [user, isOnline]);\n\n  // Cargar pesos para HomeOverview\n  useEffect(() => {\n    const loadWeights = async () => {\n      if (!user) return;\n      try {\n        if (isOnline) {\n          const res = await weightApi.list();\n          if (res.success) {\n            const normalized = (res.data || []).map(r => {\n              var _r$recorded_at;\n              return {\n                date: (_r$recorded_at = r.recorded_at) === null || _r$recorded_at === void 0 ? void 0 : _r$recorded_at.substring(0, 10),\n                weight: r.weight_kg\n              };\n            }).filter(e => e.date && e.weight);\n            setRecentWeights(normalized.sort((a, b) => new Date(a.date) - new Date(b.date)).slice(-120));\n            localStorage.setItem(`snorxfit_weights_${user.id}`, JSON.stringify(normalized));\n            return;\n          }\n        }\n        const local = localStorage.getItem(`snorxfit_weights_${user.id}`);\n        if (local) setRecentWeights(JSON.parse(local));\n      } catch {/* ignore */}\n    };\n    loadWeights();\n  }, [user, isOnline]);\n  const toggleDarkMode = () => {\n    setIsDarkMode(!isDarkMode);\n  };\n  const handleProfileSubmit = async profileData => {\n    try {\n      setIsLoadingProfile(true);\n      const profileWithUserId = {\n        ...profileData,\n        userId: user.id,\n        createdAt: new Date().toISOString()\n      };\n      if (isOnline) {\n        // Guardar en la API (enviamos objeto completo con userId y createdAt)\n        console.log('üíæ Guardando perfil en la API...');\n        const {\n          profileApi\n        } = await import('./services/apiService');\n        const result = await profileApi.saveProfile(profileWithUserId);\n        if (result.success) {\n          setUserProfile(result.data.profile);\n          console.log('‚úÖ Perfil guardado en la API');\n          // Tambi√©n guardar en localStorage como backup\n          localStorage.setItem(`snorxfit_profile_${user.id}`, JSON.stringify(result.data.profile));\n        } else {\n          console.error('‚ùå Error guardando en API:', result.error);\n          // Fallback a localStorage\n          setUserProfile(profileWithUserId);\n          localStorage.setItem(`snorxfit_profile_${user.id}`, JSON.stringify(profileWithUserId));\n        }\n      } else {\n        // Guardar solo en localStorage si la API no est√° disponible\n        console.log('üì± Guardando perfil en localStorage (modo offline)');\n        setUserProfile(profileWithUserId);\n        localStorage.setItem(`snorxfit_profile_${user.id}`, JSON.stringify(profileWithUserId));\n      }\n      setCurrentView('foodSelection');\n    } catch (error) {\n      console.error('Error guardando perfil:', error);\n      // Fallback a localStorage\n      const fallbackProfile = {\n        ...profileData,\n        userId: user.id,\n        createdAt: new Date().toISOString()\n      };\n      setUserProfile(fallbackProfile);\n      localStorage.setItem(`snorxfit_profile_${user.id}`, JSON.stringify(fallbackProfile));\n      setCurrentView('foodSelection');\n    } finally {\n      setIsLoadingProfile(false);\n    }\n  };\n  const handleNavigation = view => {\n    setCurrentView(view);\n  };\n  const handleBackToDashboard = () => {\n    setCurrentView('home');\n  };\n  const handleFoodSelectionComplete = foods => {\n    setSelectedFoods(foods);\n    setCurrentView('home');\n  };\n\n  // Mostrar loading mientras se carga el perfil\n  if (isLoadingProfile) {\n    return /*#__PURE__*/_jsxDEV(LoadingScreen, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 12\n    }, this);\n  }\n  const renderCurrentView = () => {\n    switch (currentView) {\n      case 'profile':\n        return /*#__PURE__*/_jsxDEV(UserProfileForm, {\n          onSubmit: handleProfileSubmit,\n          initialData: userProfile\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this);\n      case 'home':\n        {\n          const bmr = userProfile ? calculateBMR(userProfile.weight, userProfile.height, userProfile.age, userProfile.gender) : 0;\n          const dcal = userProfile ? calculateDailyCalories(bmr, userProfile.activityLevel) : 0;\n          return /*#__PURE__*/_jsxDEV(HomeOverview, {\n            userProfile: userProfile,\n            recentWeights: recentWeights,\n            dailyCalories: dcal,\n            onNavigate: handleNavigation,\n            onQuickAddWeight: () => handleNavigation('weightTracker'),\n            onOpenScanner: () => handleNavigation('foodScanner'),\n            onRecalculatePlan: () => handleNavigation('nutrition')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 11\n          }, this);\n        }\n      case 'dashboard':\n        return /*#__PURE__*/_jsxDEV(Dashboard, {\n          userProfile: userProfile,\n          onNavigate: handleNavigation,\n          toggleDarkMode: toggleDarkMode,\n          isDarkMode: isDarkMode,\n          user: user,\n          onLogout: logout,\n          isOnline: isOnline\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this);\n      case 'workout':\n        return /*#__PURE__*/_jsxDEV(WorkoutPlan, {\n          userProfile: userProfile,\n          onBack: handleBackToDashboard\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 16\n        }, this);\n      case 'nutrition':\n        return /*#__PURE__*/_jsxDEV(NutritionPlan, {\n          userProfile: userProfile,\n          onBack: handleBackToDashboard,\n          selectedFoods: selectedFoods\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 16\n        }, this);\n      case 'chatbot':\n        return /*#__PURE__*/_jsxDEV(Chatbot, {\n          onClose: () => setShowChatbot(false)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 16\n        }, this);\n      case 'foodLog':\n        return /*#__PURE__*/_jsxDEV(FoodSelection, {\n          onBack: handleBackToDashboard,\n          onSelectFoods: handleFoodSelectionComplete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 16\n        }, this);\n      case 'report':\n        return /*#__PURE__*/_jsxDEV(Report, {\n          userProfile: userProfile,\n          recentWeights: recentWeights\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 16\n        }, this);\n      case 'progress':\n        return /*#__PURE__*/_jsxDEV(ProgressTracker, {\n          userProfile: userProfile,\n          onBack: handleBackToDashboard\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 16\n        }, this);\n      case 'foodSelection':\n        return /*#__PURE__*/_jsxDEV(FoodSelection, {\n          onBack: handleBackToDashboard,\n          onSelectFoods: handleFoodSelectionComplete\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 16\n        }, this);\n      case 'weightTracker':\n        return /*#__PURE__*/_jsxDEV(WeightTracker, {\n          userProfile: userProfile,\n          onBack: handleBackToDashboard\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 16\n        }, this);\n      case 'moodDiary':\n        return /*#__PURE__*/_jsxDEV(MoodDiary, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 16\n        }, this);\n      case 'photos':\n        return /*#__PURE__*/_jsxDEV(PhotoGallery, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 289,\n          columnNumber: 16\n        }, this);\n      case 'reminders':\n        return /*#__PURE__*/_jsxDEV(RemindersManager, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 291,\n          columnNumber: 16\n        }, this);\n      case 'foodScanner':\n        return /*#__PURE__*/_jsxDEV(FoodScanner, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 16\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(UserProfileForm, {\n          onSubmit: handleProfileSubmit\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 16\n        }, this);\n    }\n  };\n\n  // Animaci√≥n de transici√≥n entre vistas\n  const content = /*#__PURE__*/_jsxDEV(AnimatePresence, {\n    mode: \"wait\",\n    children: /*#__PURE__*/_jsxDEV(motion.div, {\n      initial: {\n        opacity: 0,\n        x: 10\n      },\n      animate: {\n        opacity: 1,\n        x: 0\n      },\n      exit: {\n        opacity: 0,\n        x: -10\n      },\n      transition: {\n        duration: .25\n      },\n      children: renderCurrentView()\n    }, currentView, false, {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 301,\n    columnNumber: 5\n  }, this);\n\n  // Sin layout durante creaci√≥n inicial de perfil\n  if (currentView === 'profile') return content;\n  return /*#__PURE__*/_jsxDEV(AppLayout, {\n    currentView: currentView,\n    onSelectView: handleNavigation,\n    onToggleChat: () => setShowChatbot(s => !s),\n    showChat: showChatbot,\n    onLogout: logout,\n    isDarkMode: isDarkMode,\n    toggleDarkMode: toggleDarkMode,\n    children: [content, /*#__PURE__*/_jsxDEV(AnimatePresence, {\n      children: showChatbot && /*#__PURE__*/_jsxDEV(Chatbot, {\n        onClose: () => setShowChatbot(false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 40\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `fixed top-2 right-2 text-xs px-3 py-1 rounded-full font-medium ${isOnline ? 'bg-green-500 text-white' : 'bg-yellow-400 text-black'}`,\n      children: isOnline ? 'Online' : 'Offline'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 312,\n    columnNumber: 5\n  }, this);\n};\n\n// Componente contenedor que gestiona autenticaci√≥n y loading global\n_s(AuthenticatedApp, \"LmylKeYJGW61fxH1V2THe7zbi/c=\", false, function () {\n  return [useAuth];\n});\n_c = AuthenticatedApp;\nconst App = () => {\n  _s2();\n  const {\n    isAuthenticated,\n    isLoading\n  } = useAuth();\n  const [showLoadingScreen, setShowLoadingScreen] = useState(true);\n\n  // Forzar splash m√≠nimo\n  useEffect(() => {\n    const timer = setTimeout(() => setShowLoadingScreen(false), 800);\n    return () => clearTimeout(timer);\n  }, []);\n  if (showLoadingScreen || isLoading) return /*#__PURE__*/_jsxDEV(LoadingScreen, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 339,\n    columnNumber: 46\n  }, this);\n  return isAuthenticated ? /*#__PURE__*/_jsxDEV(AuthenticatedApp, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 28\n  }, this) : /*#__PURE__*/_jsxDEV(AuthScreen, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 340,\n    columnNumber: 51\n  }, this);\n};\n\n// Envolver con AuthProvider en el punto de entrada real (index.js) o aqu√≠ si se desea\n_s2(App, \"x5MQQl1t5zzluaQxF1N2FI7ozqQ=\", false, function () {\n  return [useAuth];\n});\n_c2 = App;\nconst RootApp = () => /*#__PURE__*/_jsxDEV(AuthProvider, {\n  children: /*#__PURE__*/_jsxDEV(ToastProvider, {\n    children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 346,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 345,\n  columnNumber: 3\n}, this);\n_c3 = RootApp;\nexport default RootApp;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"AuthenticatedApp\");\n$RefreshReg$(_c2, \"App\");\n$RefreshReg$(_c3, \"RootApp\");","map":{"version":3,"names":["React","useState","useEffect","motion","AnimatePresence","AuthProvider","useAuth","AuthScreen","LoadingScreen","UserProfileForm","Dashboard","HomeOverview","WorkoutPlan","NutritionPlan","ProgressTracker","FoodSelection","Chatbot","WeightTracker","MoodDiary","Report","RemindersManager","PhotoGallery","FoodScanner","testApiConnection","AppLayout","ToastProvider","flushQueue","calculateBMR","calculateDailyCalories","jsxDEV","_jsxDEV","window","AuthenticatedApp","_s","user","logout","isOnline","userProfile","setUserProfile","currentView","setCurrentView","recentWeights","setRecentWeights","isDarkMode","setIsDarkMode","savedTheme","localStorage","getItem","showChatbot","setShowChatbot","selectedFoods","setSelectedFoods","isLoadingProfile","setIsLoadingProfile","document","documentElement","classList","add","setItem","remove","loadUserProfile","savedProfile","id","profile","JSON","parse","console","log","result","success","data","error","loadWeights","res","weightApi","list","normalized","map","r","_r$recorded_at","date","recorded_at","substring","weight","weight_kg","filter","e","sort","a","b","Date","slice","stringify","local","toggleDarkMode","handleProfileSubmit","profileData","profileWithUserId","userId","createdAt","toISOString","profileApi","saveProfile","fallbackProfile","handleNavigation","view","handleBackToDashboard","handleFoodSelectionComplete","foods","fileName","_jsxFileName","lineNumber","columnNumber","renderCurrentView","onSubmit","initialData","bmr","height","age","gender","dcal","activityLevel","dailyCalories","onNavigate","onQuickAddWeight","onOpenScanner","onRecalculatePlan","onLogout","onBack","onClose","onSelectFoods","content","mode","children","div","initial","opacity","x","animate","exit","transition","duration","onSelectView","onToggleChat","s","showChat","className","_c","App","_s2","isAuthenticated","isLoading","showLoadingScreen","setShowLoadingScreen","timer","setTimeout","clearTimeout","_c2","RootApp","_c3","$RefreshReg$"],"sources":["C:/xampp/htdocs/FICTIA/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\r\nimport AuthScreen from './components/AuthScreen';\r\nimport LoadingScreen from './components/LoadingScreen';\r\nimport UserProfileForm from './components/UserProfileForm';\r\nimport Dashboard from './components/Dashboard';\r\nimport HomeOverview from './components/HomeOverview';\r\nimport WorkoutPlan from './components/WorkoutPlan';\r\nimport NutritionPlan from './components/NutritionPlan';\r\nimport ProgressTracker from './components/ProgressTracker';\r\nimport FoodSelection from './components/FoodSelection';\r\nimport Chatbot from './components/Chatbot';\r\nimport WeightTracker from './components/WeightTracker';\r\nimport MoodDiary from './components/MoodDiary';\r\nimport Report from './components/Report';\r\nimport RemindersManager from './components/RemindersManager';\r\nimport PhotoGallery from './components/PhotoGallery';\r\nimport FoodScanner from './components/FoodScanner';\r\nimport testApiConnection from './utils/testApi';\r\nimport AppLayout from './layout/AppLayout';\r\nimport { ToastProvider } from './contexts/ToastContext';\r\nimport { flushQueue } from './utils/offlineQueue';\r\n// import { weightApi, moodApi, reminderApi } from './services/apiService'; // REMOVIDO - Migrado a Firebase\r\nimport { calculateBMR, calculateDailyCalories } from './utils/calculations';\r\n\r\n// Hacer la funci√≥n disponible globalmente para debug\r\nif (typeof window !== 'undefined') {\r\n  window.testApiConnection = testApiConnection;\r\n}\r\n\r\n// Componente principal de la aplicaci√≥n autenticada\r\nconst AuthenticatedApp = () => {\r\n  const { user, logout, isOnline } = useAuth();\r\n  // Sincronizar cola offline cuando volvemos online\r\n  // TODO: Migrar a Firebase\r\n  useEffect(()=> {\r\n    if (!isOnline || !user) return;\r\n    // (async () => {\r\n    //   await flushQueue({\r\n    //     'weight:add': async ({ weight, date }) => {\r\n    //       const r = await weightApi.add(weight); return r.success;\r\n    //     },\r\n    //     'mood:add': async ({ mood, note }) => {\r\n    //       const r = await moodApi.add(mood, note); return r.success;\r\n    //     },\r\n    //     'reminder:add': async ({ type, scheduledAt, message }) => {\r\n    //       const r = await reminderApi.add(type, scheduledAt, message); return r.success;\r\n    //     }\r\n    //   });\r\n    // })();\r\n  }, [isOnline, user]);\r\n  const [userProfile, setUserProfile] = useState(null);\r\n  const [currentView, setCurrentView] = useState('profile');\r\n  const [recentWeights, setRecentWeights] = useState([]);\r\n  const [isDarkMode, setIsDarkMode] = useState(() => {\r\n    // Cargar preferencia de tema desde localStorage\r\n    const savedTheme = localStorage.getItem('snorxfit_theme');\r\n    return savedTheme === 'dark';\r\n  });\r\n  const [showChatbot, setShowChatbot] = useState(false);\r\n  const [selectedFoods, setSelectedFoods] = useState({});\r\n  const [isLoadingProfile, setIsLoadingProfile] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Aplicar dark class al elemento html y guardar preferencia\r\n    if (isDarkMode) {\r\n      document.documentElement.classList.add('dark');\r\n      localStorage.setItem('snorxfit_theme', 'dark');\r\n    } else {\r\n      document.documentElement.classList.remove('dark');\r\n      localStorage.setItem('snorxfit_theme', 'light');\r\n    }\r\n  }, [isDarkMode]);\r\n\r\n  // Cargar perfil del usuario desde la API\r\n  useEffect(() => {\r\n    const loadUserProfile = async () => {\r\n      try {\r\n        setIsLoadingProfile(true);\r\n\r\n        if (!isOnline) {\r\n          // Fallback a localStorage si la API no est√° disponible\r\n          const savedProfile = localStorage.getItem(`snorxfit_profile_${user.id}`);\r\n          if (savedProfile) {\r\n            const profile = JSON.parse(savedProfile);\r\n            setUserProfile(profile);\r\n            setCurrentView('dashboard');\r\n          }\r\n          setIsLoadingProfile(false);\r\n          return;\r\n        }\r\n\r\n        // Intentar cargar perfil desde la API\r\n        console.log('üìä Cargando perfil desde Firebase...');\r\n        // const { profileApi } = await import('./services/apiService');\r\n        // const result = await profileApi.getProfile();\r\n        \r\n        // TODO: Cargar desde Firebase Firestore\r\n        const result = { success: false };\r\n        \r\n        if (result.success) {\r\n          setUserProfile(result.data.profile);\r\n          setCurrentView('home');\r\n          console.log('‚úÖ Perfil cargado desde la API');\r\n        } else {\r\n          // Si no hay perfil en la API, intentar cargar desde localStorage\r\n          const savedProfile = localStorage.getItem(`snorxfit_profile_${user.id}`);\r\n          if (savedProfile) {\r\n            const profile = JSON.parse(savedProfile);\r\n            setUserProfile(profile);\r\n            setCurrentView('home');\r\n            console.log('üì± Perfil cargado desde localStorage (fallback)');\r\n          } else {\r\n            console.log('üìù No hay perfil, mostrando formulario de creaci√≥n');\r\n            setCurrentView('profile');\r\n          }\r\n        }\r\n\r\n      } catch (error) {\r\n        console.error('Error cargando perfil:', error);\r\n        // Fallback a localStorage en caso de error\r\n        const savedProfile = localStorage.getItem(`snorxfit_profile_${user.id}`);\r\n        if (savedProfile) {\r\n          const profile = JSON.parse(savedProfile);\r\n          setUserProfile(profile);\r\n            setCurrentView('home');\r\n        }\r\n      } finally {\r\n        setIsLoadingProfile(false);\r\n      }\r\n    };\r\n\r\n    if (user) {\r\n      loadUserProfile();\r\n    }\r\n  }, [user, isOnline]);\r\n\r\n  // Cargar pesos para HomeOverview\r\n  useEffect(()=>{\r\n    const loadWeights = async () => {\r\n      if (!user) return;\r\n      try {\r\n        if (isOnline) {\r\n          const res = await weightApi.list();\r\n          if (res.success) {\r\n            const normalized = (res.data || []).map(r => ({ date: r.recorded_at?.substring(0,10), weight: r.weight_kg })).filter(e => e.date && e.weight);\r\n            setRecentWeights(normalized.sort((a,b)=> new Date(a.date)-new Date(b.date)).slice(-120));\r\n            localStorage.setItem(`snorxfit_weights_${user.id}`, JSON.stringify(normalized));\r\n            return;\r\n          }\r\n        }\r\n        const local = localStorage.getItem(`snorxfit_weights_${user.id}`);\r\n        if (local) setRecentWeights(JSON.parse(local));\r\n      } catch {/* ignore */}\r\n    };\r\n    loadWeights();\r\n  }, [user, isOnline]);\r\n\r\n  const toggleDarkMode = () => {\r\n    setIsDarkMode(!isDarkMode);\r\n  };\r\n\r\n  const handleProfileSubmit = async (profileData) => {\r\n    try {\r\n      setIsLoadingProfile(true);\r\n\r\n      const profileWithUserId = {\r\n        ...profileData,\r\n        userId: user.id,\r\n        createdAt: new Date().toISOString()\r\n      };\r\n\r\n      if (isOnline) {\r\n        // Guardar en la API (enviamos objeto completo con userId y createdAt)\r\n        console.log('üíæ Guardando perfil en la API...');\r\n        const { profileApi } = await import('./services/apiService');\r\n        const result = await profileApi.saveProfile(profileWithUserId);\r\n        \r\n        if (result.success) {\r\n          setUserProfile(result.data.profile);\r\n          console.log('‚úÖ Perfil guardado en la API');\r\n          // Tambi√©n guardar en localStorage como backup\r\n          localStorage.setItem(`snorxfit_profile_${user.id}`, JSON.stringify(result.data.profile));\r\n        } else {\r\n          console.error('‚ùå Error guardando en API:', result.error);\r\n          // Fallback a localStorage\r\n          setUserProfile(profileWithUserId);\r\n          localStorage.setItem(`snorxfit_profile_${user.id}`, JSON.stringify(profileWithUserId));\r\n        }\r\n      } else {\r\n        // Guardar solo en localStorage si la API no est√° disponible\r\n        console.log('üì± Guardando perfil en localStorage (modo offline)');\r\n        setUserProfile(profileWithUserId);\r\n        localStorage.setItem(`snorxfit_profile_${user.id}`, JSON.stringify(profileWithUserId));\r\n      }\r\n\r\n      setCurrentView('foodSelection');\r\n\r\n    } catch (error) {\r\n      console.error('Error guardando perfil:', error);\r\n      // Fallback a localStorage\r\n      const fallbackProfile = {\r\n        ...profileData,\r\n        userId: user.id,\r\n        createdAt: new Date().toISOString()\r\n      };\r\n      setUserProfile(fallbackProfile);\r\n      localStorage.setItem(`snorxfit_profile_${user.id}`, JSON.stringify(fallbackProfile));\r\n      setCurrentView('foodSelection');\r\n    } finally {\r\n      setIsLoadingProfile(false);\r\n    }\r\n  };\r\n\r\n  const handleNavigation = (view) => {\r\n    setCurrentView(view);\r\n  };\r\n\r\n  const handleBackToDashboard = () => {\r\n  setCurrentView('home');\r\n  };\r\n\r\n  const handleFoodSelectionComplete = (foods) => {\r\n    setSelectedFoods(foods);\r\n  setCurrentView('home');\r\n  };\r\n\r\n  // Mostrar loading mientras se carga el perfil\r\n  if (isLoadingProfile) {\r\n    return <LoadingScreen />;\r\n  }\r\n\r\n  const renderCurrentView = () => {\r\n    switch (currentView) {\r\n      case 'profile':\r\n        return (\r\n          <UserProfileForm \r\n            onSubmit={handleProfileSubmit} \r\n            initialData={userProfile}\r\n          />\r\n        );\r\n      case 'home': {\r\n        const bmr = userProfile ? calculateBMR(userProfile.weight, userProfile.height, userProfile.age, userProfile.gender) : 0;\r\n        const dcal = userProfile ? calculateDailyCalories(bmr, userProfile.activityLevel) : 0;\r\n        return (\r\n          <HomeOverview\r\n            userProfile={userProfile}\r\n            recentWeights={recentWeights}\r\n            dailyCalories={dcal}\r\n            onNavigate={handleNavigation}\r\n            onQuickAddWeight={() => handleNavigation('weightTracker')}\r\n            onOpenScanner={() => handleNavigation('foodScanner')}\r\n            onRecalculatePlan={() => handleNavigation('nutrition')}\r\n          />\r\n        );\r\n      }\r\n      case 'dashboard':\r\n        return (\r\n          <Dashboard \r\n            userProfile={userProfile} \r\n            onNavigate={handleNavigation} \r\n            toggleDarkMode={toggleDarkMode} \r\n            isDarkMode={isDarkMode}\r\n            user={user}\r\n            onLogout={logout}\r\n            isOnline={isOnline}\r\n          />\r\n        );\r\n      case 'workout':\r\n        return <WorkoutPlan userProfile={userProfile} onBack={handleBackToDashboard} />;\r\n      case 'nutrition':\r\n        return <NutritionPlan userProfile={userProfile} onBack={handleBackToDashboard} selectedFoods={selectedFoods} />;\r\n      case 'chatbot':\r\n        return <Chatbot onClose={()=> setShowChatbot(false)} />;\r\n      case 'foodLog':\r\n        return <FoodSelection onBack={handleBackToDashboard} onSelectFoods={handleFoodSelectionComplete} />;\r\n      case 'report':\r\n        return <Report userProfile={userProfile} recentWeights={recentWeights} />;\r\n      case 'progress':\r\n        return <ProgressTracker userProfile={userProfile} onBack={handleBackToDashboard} />;\r\n      case 'foodSelection':\r\n        return <FoodSelection onBack={handleBackToDashboard} onSelectFoods={handleFoodSelectionComplete} />;\r\n      case 'weightTracker':\r\n        return <WeightTracker userProfile={userProfile} onBack={handleBackToDashboard} />;\r\n      case 'moodDiary':\r\n        return <MoodDiary />;\r\n      case 'photos':\r\n        return <PhotoGallery />;\r\n      case 'reminders':\r\n        return <RemindersManager />;\r\n      case 'foodScanner':\r\n        return <FoodScanner />;\r\n      default:\r\n        return <UserProfileForm onSubmit={handleProfileSubmit} />;\r\n    }\r\n  };\r\n\r\n  // Animaci√≥n de transici√≥n entre vistas\r\n  const content = (\r\n    <AnimatePresence mode=\"wait\">\r\n      <motion.div key={currentView} initial={{ opacity:0, x:10}} animate={{ opacity:1, x:0}} exit={{ opacity:0, x:-10}} transition={{ duration:.25}}>\r\n        {renderCurrentView()}\r\n      </motion.div>\r\n    </AnimatePresence>\r\n  );\r\n\r\n  // Sin layout durante creaci√≥n inicial de perfil\r\n  if (currentView === 'profile') return content;\r\n\r\n  return (\r\n    <AppLayout\r\n      currentView={currentView}\r\n      onSelectView={handleNavigation}\r\n      onToggleChat={()=> setShowChatbot(s=> !s)}\r\n      showChat={showChatbot}\r\n      onLogout={logout}\r\n      isDarkMode={isDarkMode}\r\n      toggleDarkMode={toggleDarkMode}\r\n    >\r\n      {content}\r\n      <AnimatePresence>{showChatbot && <Chatbot onClose={()=> setShowChatbot(false)} />}</AnimatePresence>\r\n      <div className={`fixed top-2 right-2 text-xs px-3 py-1 rounded-full font-medium ${isOnline ? 'bg-green-500 text-white':'bg-yellow-400 text-black'}`}>{isOnline ? 'Online' : 'Offline'}</div>\r\n    </AppLayout>\r\n  );\r\n};\r\n\r\n// Componente contenedor que gestiona autenticaci√≥n y loading global\r\nconst App = () => {\r\n  const { isAuthenticated, isLoading } = useAuth();\r\n  const [showLoadingScreen, setShowLoadingScreen] = useState(true);\r\n\r\n  // Forzar splash m√≠nimo\r\n  useEffect(() => {\r\n    const timer = setTimeout(()=> setShowLoadingScreen(false), 800);\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  if (showLoadingScreen || isLoading) return <LoadingScreen />;\r\n  return isAuthenticated ? <AuthenticatedApp /> : <AuthScreen />;\r\n};\r\n\r\n// Envolver con AuthProvider en el punto de entrada real (index.js) o aqu√≠ si se desea\r\nconst RootApp = () => (\r\n  <AuthProvider>\r\n    <ToastProvider>\r\n      <App />\r\n    </ToastProvider>\r\n  </AuthProvider>\r\n);\r\n\r\nexport default RootApp;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}